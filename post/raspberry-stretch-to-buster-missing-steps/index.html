<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Raspberry Pi Stretch to Buster Missing Steps | Bas-Man's Ponderings</title><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=generator content="Hugo 0.79.1"><meta name=ROBOTS content="INDEX, FOLLOW"><link href=/dist/css/app.4fc0b62e4b82c997bb0041217cd6b979.css rel=stylesheet><link rel=stylesheet href=/css/custom.css><link rel=stylesheet href=/css/cookie.css><link rel="shortcut icon" href=/images/favicons/favico.ico type=image/x-icon><meta property="og:title" content="Raspberry Pi Stretch to Buster Missing Steps"><meta property="og:description" content="This is a guide to prevent possible issues when upgrading a Raspberry Pi from Stretch to Buster."><meta property="og:type" content="article"><meta property="og:url" content="https://bas-man.github.io/post/raspberry-stretch-to-buster-missing-steps/"><meta property="article:published_time" content="2020-12-11T13:00:30+09:00"><meta property="article:modified_time" content="2020-12-11T13:00:30+09:00"><meta itemprop=name content="Raspberry Pi Stretch to Buster Missing Steps"><meta itemprop=description content="This is a guide to prevent possible issues when upgrading a Raspberry Pi from Stretch to Buster."><meta itemprop=datePublished content="2020-12-11T13:00:30+09:00"><meta itemprop=dateModified content="2020-12-11T13:00:30+09:00"><meta itemprop=wordCount content="471"><meta itemprop=keywords content="raspberry,upgrade,stretch,buster,debian,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Raspberry Pi Stretch to Buster Missing Steps"><meta name=twitter:description content="This is a guide to prevent possible issues when upgrading a Raspberry Pi from Stretch to Buster."><script type=application/javascript>var dnt=(navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack);var doNotTrack=(dnt=="1"||dnt=="yes");if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;if(window.sessionStorage){var GA_SESSION_STORAGE_KEY='ga:clientId';ga('create','UA-166598762-1',{'storage':'none','clientId':sessionStorage.getItem(GA_SESSION_STORAGE_KEY)});ga(function(tracker){sessionStorage.setItem(GA_SESSION_STORAGE_KEY,tracker.get('clientId'));});}
ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class="ma0 avenir bg-near-white"><header><div class=bg-black><nav class="pv3 ph3 ph4-ns" role=navigation><div class="flex-l justify-between items-center center"><a href=/ class="f3 fw2 hover-white no-underline white-90 dib">Bas-Man's Ponderings</a><div class="flex-l items-center"><ul class="pl0 mr3"><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/ title="Home page">Home</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/post/ title="Blog page">Blog</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/projects/ title="Projects page">Projects</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/cheatsheets/ title="Cheat Sheets page">Cheat Sheets</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/docs/ title="Documentation page">Documentation</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/about/ title="About page">About</a></li></ul><a href=https://www.github.com/Bas-Man target=_blank class="link-transition github link dib z-999 pt3 pt0-l mr1" title="Github link" rel=noopener aria-label="follow on Github——Opens in a new window"><svg height="32" style="enable-background:new 0 0 512 512" viewBox="0 0 512 512" width="32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M256 32C132.3 32 32 134.8 32 261.7c0 101.5 64.2 187.5 153.2 217.9 11.2 2.1 15.3-5 15.3-11.1.0-5.5-.2-19.9-.3-39.1-62.3 13.9-75.5-30.8-75.5-30.8-10.2-26.5-24.9-33.6-24.9-33.6-20.3-14.3 1.5-14 1.5-14 22.5 1.6 34.3 23.7 34.3 23.7 20 35.1 52.4 25 65.2 19.1 2-14.8 7.8-25 14.2-30.7-49.7-5.8-102-25.5-102-113.5.0-25.1 8.7-45.6 23-61.6-2.3-5.8-10-29.2 2.2-60.8.0.0 18.8-6.2 61.6 23.5 17.9-5.1 37-7.6 56.1-7.7 19 .1 38.2 2.6 56.1 7.7 42.8-29.7 61.5-23.5 61.5-23.5 12.2 31.6 4.5 55 2.2 60.8 14.3 16.1 23 36.6 23 61.6.0 88.2-52.4 107.6-102.3 113.3 8 7.1 15.2 21.1 15.2 42.5.0 30.7-.3 55.5-.3 63 0 6.1 4 13.3 15.4 11C415.9 449.1 480 363.1 480 261.7 480 134.8 379.7 32 256 32z"/></svg><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" width="8" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg></span></a><a href=https://dev.to/basman target=_blank class="link-transition github link dib z-999 pt3 pt0-l mr1" title="Dev-To link" rel=noopener aria-label="follow on Dev.to——Opens in a new window"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 24 24" style="-ms-transform:rotate(360deg);-webkit-transform:rotate(360deg);transform:rotate(360deg)"><path d="M7.73 11.93c0 1.72-.02 1.83-.23 2.07-.19.17-.38.23-.76.23l-.51.01-.03-2.27-.02-2.27h.52c.35.0.6.07.77.21.24.21.26.25.26 2.02M22 7.5v9c0 1.11-.89 2-2 2H4c-1.11.0-2-.89-2-2v-9c0-1.11.89-2 2-2h16c1.11.0 2 .89 2 2M8.93 11.73c-.03-1.84-.05-1.99-.29-2.39-.4-.68-.85-.84-2.36-.84H5v7h1.21c1.33.0 1.89-.17 2.29-.71.41-.53.5-.98.43-3.06m4.19-3.23h-1.48c-1.49.0-1.5.0-1.71.28S9.7 9.21 9.7 12v2.96l.27.27c.25.27.31.27 1.71.27h1.44v-1.19l-1.09-.04-1.1-.03V12.6l.68-.03.66-.04v-1.19h-1.39V9.7h2.24V8.5m5.88.06c0-.06-.3-.06-.66-.06l-.68.06-.59 2.35c-.38 1.48-.62 2.27-.67 2.13-.08-.27-1.14-4.44-1.14-4.49.0-.05-.31-.05-.68-.05h-.69l.41 1.55c.2.87.59 2.28.81 3.15.34 1.35.46 1.65.75 1.94.2.22.45.36.61.36.33.0.76-.34.9-.73C17.5 14.5 19 8.69 19 8.56z" fill="#626262"/><rect x="0" y="0" width="24" height="24" fill="rgba(0, 0, 0, 0)"/></svg><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" width="8" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg></span></a><a href="https://flipboard.com/@baspann/coding-kq8v8rh8z?from=share" target=_blank class="link-transition github link dib z-999 pt3 pt0-l mr1" title="Flipboard link" rel=noopener aria-label="follow on Dev.to——Opens in a new window"><!doctype html><svg height="32" style="enable-background:new 0 0 512 512" viewBox="0 0 512 512" width="32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="_x31_31-flipboard"><g><g><path d="M26.002 26.001v459.998h459.996V26.001H26.002zm367.997 184H302V302h-92v92.001h-92V118.002h275.999V210.001z" style="fill:#f22c31"/></g></g></g><g id="Layer_1"/></svg><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" width="8" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg></span></a></div></div></nav></div></header><main class=pb7 role=main><article class="flex-l flex-wrap justify-between mw8 center ph3"><header class="mt4 w-100"><aside class="instapaper_ignoref b helvetica tracked">ARTICLES</aside><h1 class="f1 athelas mt3 mb1">Raspberry Pi Stretch to Buster Missing Steps</h1><p class=tracked>By <strong>Adam Spann</strong></p><time class="f6 mv4 dib tracked" datetime=2020-12-11T13:00:30+09:00>&nbsp;December 11, 2020<br></time><span class="f6 mv4 dib tracked">- 3 minutes read</span>
<span class="f6 mv4 dib tracked">- 471 words</span></header><div class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><p>I recently went through the process of upgrading my raspberry Pis from Stretch to Buster. I had previously done this moving from Jessie.</p><p>Whilst I had no real issues with task following the guides that I found. I did discover one thing that concerned me, and was missing from the guides.</p><p>After upgrading to Buster, my <code>/boot</code> had less than 200kb of free storage.</p><p>I did some reading and found that Buster seems to need a lot more space in <code>/boot</code> than for previous releases. Buster itself now defaults to 256M of space for <code>/boot</code></p><p>So I went about solving this issue.</p><p>I would suggest that you do these steps before upgrading just to avoid any possible problems.</p><h2 id=warning>Warning!</h2><p>This action does have the potential to cause data loss. You should backup your data onto another device. Use a tool such as <a href=https://www.balena.io/etcher/>etcher</a> to make a block copy of your disk.</p><h3 id=what-you-will-need>What you will need:</h3><ul><li>A spare Linux machine with gui interface.<ul><li>Alternatively, if you have a spare SD card, you can install Buster or Stretch on to that and boot from it. Then use the original hardware to update the previously exiting card.</li></ul></li><li>USB card reader.</li><li>monitor, keyboard and mouse</li><li><code>gparted</code> installed.</li></ul><h3 id=the-steps>The steps.</h3><p>These are the basic steps that will need to be followed.</p><ol><li>Shrink the rootfs and run check</li><li>Move rootfs to the right using the mouse to drag it to the right, and run check (this will take some time)</li><li>Expand /boot partition to 256M and run check</li></ol><ul><li>There could be issues with this last step. We will cover them later.</li></ul><h4 id=getting-situated>Getting situated:</h4><p>If you have spare linux machine. Set it up and getting it running with the SD card reader attached.</p><p>If you don&rsquo;t have a spare machine, but have a spare SD card. Install your preferred linux distro. Shutdown the existing server and then swap out the old SD card for the new and get it running with all the required attached devices.</p><p>If it does not boot up into x-windows by default, login and then issue the command <code>startx</code>. If you have issues, then use <code>sudo</code> to execute as root.
Launch <code>gparted</code> either using a terminal or through the drop down menu system. If gparted is not installed. Open a terminal and issue the following commands.</p><pre><code>apt update
apt install gparted
</code></pre><p>Insert the old SD card in to the reader and give gparted a few moments to scan the devices.
<strong>Be careful here. We want to make sure that we are working with the correct device and not the SD card we are booting from. So make sure to select the correct</strong> <em>/dev</em> <strong>device.</strong> It should be mounted on the system as <em>/media/XXX</em></p><p>Rather than rewrite something that has been covered on other sites. I would direct you to the sites below.</p><p><a href=https://learn.adafruit.com/resizing-raspberry-pi-boot-partition/edit-partitions>https://learn.adafruit.com/resizing-raspberry-pi-boot-partition/edit-partitions</a></p><p><a href="https://bugzilla.gnome.org/show_bug.cgi?id=649324">https://bugzilla.gnome.org/show_bug.cgi?id=649324</a></p><ul class=pa0><li class=list><a href=/tags/raspberry class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">raspberry</a></li><li class=list><a href=/tags/upgrade class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">upgrade</a></li><li class=list><a href=/tags/stretch class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">stretch</a></li><li class=list><a href=/tags/buster class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">buster</a></li><li class=list><a href=/tags/debian class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">debian</a></li></ul><div class="mt6 instapaper_ignoref"></div></div><aside class="w-30-l mt6-l"></aside></article></main><footer class="bg-black bottom-0 w-100 pa3" role=contentinfo><div class="flex justify-between"><a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://bas-man.github.io/>&copy; Bas-Man's Ponderings 2020</a>
<a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://bas-man.github.io//privacy>Privacy</a><div><a href=https://www.github.com/Bas-Man target=_blank class="link-transition github link dib z-999 pt3 pt0-l mr1" title="Github link" rel=noopener aria-label="follow on Github——Opens in a new window"><svg height="32" style="enable-background:new 0 0 512 512" viewBox="0 0 512 512" width="32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M256 32C132.3 32 32 134.8 32 261.7c0 101.5 64.2 187.5 153.2 217.9 11.2 2.1 15.3-5 15.3-11.1.0-5.5-.2-19.9-.3-39.1-62.3 13.9-75.5-30.8-75.5-30.8-10.2-26.5-24.9-33.6-24.9-33.6-20.3-14.3 1.5-14 1.5-14 22.5 1.6 34.3 23.7 34.3 23.7 20 35.1 52.4 25 65.2 19.1 2-14.8 7.8-25 14.2-30.7-49.7-5.8-102-25.5-102-113.5.0-25.1 8.7-45.6 23-61.6-2.3-5.8-10-29.2 2.2-60.8.0.0 18.8-6.2 61.6 23.5 17.9-5.1 37-7.6 56.1-7.7 19 .1 38.2 2.6 56.1 7.7 42.8-29.7 61.5-23.5 61.5-23.5 12.2 31.6 4.5 55 2.2 60.8 14.3 16.1 23 36.6 23 61.6.0 88.2-52.4 107.6-102.3 113.3 8 7.1 15.2 21.1 15.2 42.5.0 30.7-.3 55.5-.3 63 0 6.1 4 13.3 15.4 11C415.9 449.1 480 363.1 480 261.7 480 134.8 379.7 32 256 32z"/></svg><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" width="8" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg></span></a><a href=https://dev.to/basman target=_blank class="link-transition github link dib z-999 pt3 pt0-l mr1" title="Dev-To link" rel=noopener aria-label="follow on Dev.to——Opens in a new window"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 24 24" style="-ms-transform:rotate(360deg);-webkit-transform:rotate(360deg);transform:rotate(360deg)"><path d="M7.73 11.93c0 1.72-.02 1.83-.23 2.07-.19.17-.38.23-.76.23l-.51.01-.03-2.27-.02-2.27h.52c.35.0.6.07.77.21.24.21.26.25.26 2.02M22 7.5v9c0 1.11-.89 2-2 2H4c-1.11.0-2-.89-2-2v-9c0-1.11.89-2 2-2h16c1.11.0 2 .89 2 2M8.93 11.73c-.03-1.84-.05-1.99-.29-2.39-.4-.68-.85-.84-2.36-.84H5v7h1.21c1.33.0 1.89-.17 2.29-.71.41-.53.5-.98.43-3.06m4.19-3.23h-1.48c-1.49.0-1.5.0-1.71.28S9.7 9.21 9.7 12v2.96l.27.27c.25.27.31.27 1.71.27h1.44v-1.19l-1.09-.04-1.1-.03V12.6l.68-.03.66-.04v-1.19h-1.39V9.7h2.24V8.5m5.88.06c0-.06-.3-.06-.66-.06l-.68.06-.59 2.35c-.38 1.48-.62 2.27-.67 2.13-.08-.27-1.14-4.44-1.14-4.49.0-.05-.31-.05-.68-.05h-.69l.41 1.55c.2.87.59 2.28.81 3.15.34 1.35.46 1.65.75 1.94.2.22.45.36.61.36.33.0.76-.34.9-.73C17.5 14.5 19 8.69 19 8.56z" fill="#626262"/><rect x="0" y="0" width="24" height="24" fill="rgba(0, 0, 0, 0)"/></svg><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" width="8" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg></span></a><a href="https://flipboard.com/@baspann/coding-kq8v8rh8z?from=share" target=_blank class="link-transition github link dib z-999 pt3 pt0-l mr1" title="Flipboard link" rel=noopener aria-label="follow on Dev.to——Opens in a new window"><!doctype html><svg height="32" style="enable-background:new 0 0 512 512" viewBox="0 0 512 512" width="32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="_x31_31-flipboard"><g><g><path d="M26.002 26.001v459.998h459.996V26.001H26.002zm367.997 184H302V302h-92v92.001h-92V118.002h275.999V210.001z" style="fill:#f22c31"/></g></g></g><g id="Layer_1"/></svg><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" width="8" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg></span></a></div></div></footer><script src=/dist/js/app.3fc0f988d21662902933.js></script><div class=cookie-container><p>By using this site, you agree to our use of cookies.
We use cookies on this website to give you the best experience on our
site. To find out more, read our <a href=/privacy/>privacy</a> policy.</p><button class=cookie-btn>
Okay</button></div><script src=/my_js/cookie.js></script></body></html>